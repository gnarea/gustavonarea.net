<!doctype html>

<html lang="en-US">
<head>
	<meta charset="UTF-8">
	
	
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

			    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
	<title>HOWTOs | Gustavo on Software Development</title>
    
    <!--[if lte IE 9]>
        <script src="/wp-content/themes/read-v4-3-1/js/html5shiv.js"></script>
        <script src="/wp-content/themes/read-v4-3-1/js/selectivizr-min.js"></script>
    <![endif]-->
	
		
	<link rel="alternate" type="application/rss+xml" title="Gustavo on Software Development &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Gustavo on Software Development &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Gustavo on Software Development &raquo; HOWTOs Category Feed" href="/blog/topics/howtos/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.16"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='unifrakturmaguntia-css'  href='//fonts.googleapis.com/css?family=UnifrakturMaguntia&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' id='coustard-css'  href='//fonts.googleapis.com/css?family=Coustard&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' id='lora-css'  href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic&#038;subset=latin' type='text/css' media='all' />
<link rel='stylesheet' id='print-css'  href='/wp-content/themes/read-v4-3-1/css/print.css' type='text/css' media='print' />
<link rel='stylesheet' id='grid-css'  href='/wp-content/themes/read-v4-3-1/css/grid.css' type='text/css' media='all' />
<link rel='stylesheet' id='normalize-css'  href='/wp-content/themes/read-v4-3-1/css/normalize.css' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='/wp-content/themes/read-v4-3-1/css/font-awesome.css' type='text/css' media='all' />
<link rel='stylesheet' id='google-code-prettify-css'  href='/wp-content/themes/read-v4-3-1/js/google-code-prettify/prettify.css' type='text/css' media='all' />
<link rel='stylesheet' id='uniform-css'  href='/wp-content/themes/read-v4-3-1/css/uniform.default.css' type='text/css' media='all' />
<link rel='stylesheet' id='flexslider-css'  href='/wp-content/themes/read-v4-3-1/css/flexslider.css' type='text/css' media='all' />
<link rel='stylesheet' id='gamma-gallery-css'  href='/wp-content/themes/read-v4-3-1/css/gamma-gallery.css' type='text/css' media='all' />
<link rel='stylesheet' id='main-css'  href='/wp-content/themes/read-v4-3-1/css/main.css' type='text/css' media='all' />
<link rel='stylesheet' id='fancybox-css'  href='/wp-content/themes/read-v4-3-1/css/jquery.fancybox-1.3.4.css' type='text/css' media='all' />
<link rel='stylesheet' id='wp-fix-css'  href='/wp-content/themes/read-v4-3-1/css/wp-fix.css' type='text/css' media='all' />
<!-- This site uses the Google Analytics by Yoast plugin v5.4.6 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-22641273-1', 'auto');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.11.3'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.4.16" />

<link rel="stylesheet" type="text/css" href="/wp-content/themes/read-v4-3-1/style.css">

		
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Rock Salt&subset=latin">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Coustard&subset=latin">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Coustard&subset=latin">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lora&subset=latin">
<style type="text/css">
a { color: #ce6607; }

a:hover { color: #a35208; }

.main-navigation ul .current_page_item > a, .main-navigation ul .current-menu-item > a { color: #cc3300; }

h1.site-title, h1.site-title a { font-family: "Rock Salt", Georgia, serif; }

h1, h2, h3, h4, h5, h6 { font-family: "Coustard", Georgia, serif; }

.main-navigation ul li { font-family: "Coustard", Georgia, serif; }

html { font-family: "Lora", Georgia, serif; }
</style>
		<style type="text/css">
h1.site-title {
  font-size: 2.8em;
  }

h1.site-title a {
  border-bottom: 0;
  }

h2.site-description {
  font-style: italic;
  }

article.post {
  padding-bottom: 0;
  }

article h2 {
  text-align: center;
  }

aside.about-author {
  padding-top: 0;
  }

code {
  white-space: pre;
  width: 90%;
  overflow: auto;
  }

.prettyprint {
  padding: 0 1em;
  }

code br {
  display: none;
  }
</style>
</head>

<body class="archive category category-howtos category-70">

    <div id="page" class="hfeed site"> 
        <header class="site-header wrapper" role="banner">
			<div class="row deprecation-notice">
                            <strong>This website is now archived</strong>. <a href="https://gustavo.engineer/" title="Gustavo Narea">gustavo.engineer</a> is my new professional website.
			</div>

			<div class="row">
			    <hgroup>
					<h1 class="site-title">
															<a href="/" rel="home">Gustavo on Software Development</a>
													</h1>
					<!-- end .site-title -->
					
					<h2 class="site-description">
						Notes from a disciplined software developer					</h2>
					<!-- end .site-description -->
			    </hgroup>
				
								
			    <nav id="site-navigation" class="main-navigation" role="navigation">
					<ul id="nav" class="menu-custom"><li id="menu-item-817" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-817"><a href="/">Home</a></li>
<li id="menu-item-972" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-972"><a href="/work/">Portfolio</a></li>
<li id="menu-item-820" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-820"><a href="/about/">About</a></li>
<li id="menu-item-822" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-822"><a href="/contact/">Contact</a></li>
</ul>			    </nav>
			    <!-- end #site-navigation -->
			</div>
			<!-- end .row -->
        </header>
        <!-- end .site-header -->
		
				
        <section id="main" class="middle wrapper">
			<div class="row row-fluid">
<div id="primary" class="site-content">
	<div id="content" role="main">
		<div class="post-archive blog-masonry">
			<header class="page-header">
				<h1 class="page-title">Post Category <span class="on">&#8594;</span> <span>HOWTOs</span></h1>
			</header>
			<!-- end .page-header -->
			
			<article id="post-294" class="clearfix post-294 post type-post status-publish format-standard hentry category-howtos category-publications category-software-development category-tg tag-python tag-python-magazine tag-repoze-what tag-repozewho tag-turbogears tag-wsgi">
	<header class="entry-header">
		<h1 class="entry-title">
						<a  href="/blog/posts/repoze-auth/" rel="bookmark">Web Site Security With repoze.who and repoze.what</a>
		</h1>
	</header>
	
	
	<footer class="entry-meta">
		<span class="post-category">
			posted in <a href="/blog/topics/howtos/" rel="category tag">HOWTOs</a>, <a href="/blog/topics/publications/" rel="category tag">Publications</a>, <a href="/blog/topics/software-development/" rel="category tag">Software development</a>, <a href="/blog/topics/tg/" rel="category tag">Turbo Gears</a>		</span>
		
		
		<span class="post-date">
			on <a href="/blog/posts/repoze-auth/" title="2:41 pm" rel="bookmark"><time class="entry-date" datetime="2012-11-09T23:15:57+00:00">June 1, 2010</time></a>
		</span>
		
		
		<span class="by-author"> by			<span class="author vcard">
				<a class="url fn n" href="/blog/posts/author/admin/" title="View all posts by Gustavo" rel="author">Gustavo</a>
			</span>
		</span>
		
		
							<span class="comments-link">
						<a href="/blog/posts/repoze-auth/#comments">6 Comments</a>					</span>
						
		
			</footer>
	
	
		
	
	<div class="entry-content clearfix">
		<p><em>This article first appeared in the May 2009 issue of Python Magazine and has been slightly updated. The contents of the article are only applicable to repoze.who 1.0 and repoze.what 1.0, <strong>not</strong> repoze.who 2 and repoze.what 1.1 which are under development as of this writing.</em></p>
<p>Have you ever created a Web application? If so, it&#8217;s very likely that you have at one time or another faced &#8220;the security problem&#8221;; whether to create and maintain a homegrown security sub-system, or to learn to use framework-specific security mechanisms (which may not be as flexible as you wish).</p>
<p><strong>Securing Web applications shouldn&#8217;t be a problem</strong>. This article explores a highly extensible alternative which you can learn once and use in arbitrary applications, regardless of the Web framework used (if any!).<br />
 <a href="/blog/posts/repoze-auth/#more-294" class="more-link">Continue reading <span class="meta-nav">&#8594;</span></a></p>
		
		
			</div>
</article><article id="post-51" class="clearfix post-51 post type-post status-publish format-standard hentry category-howtos tag-subversion">
	<header class="entry-header">
		<h1 class="entry-title">
						<a  href="/blog/posts/backing-up-and-restoring-your-subversion-repository/" rel="bookmark">Backing up and restoring your Subversion repository</a>
		</h1>
	</header>
	
	
	<footer class="entry-meta">
		<span class="post-category">
			posted in <a href="/blog/topics/howtos/" rel="category tag">HOWTOs</a>		</span>
		
		
		<span class="post-date">
			on <a href="/blog/posts/backing-up-and-restoring-your-subversion-repository/" title="9:03 am" rel="bookmark"><time class="entry-date" datetime="2012-11-09T23:15:57+00:00">May 30, 2008</time></a>
		</span>
		
		
		<span class="by-author"> by			<span class="author vcard">
				<a class="url fn n" href="/blog/posts/author/admin/" title="View all posts by Gustavo" rel="author">Gustavo</a>
			</span>
		</span>
		
		
							<span class="comments-link">
						<a href="/blog/posts/backing-up-and-restoring-your-subversion-repository/#comments">2 Comments</a>					</span>
						
		
			</footer>
	
	
		
	
	<div class="entry-content clearfix">
		<p>Most tutorials around show how to backup your Subversion repository:</p>
<p><code>svnadmin dump /path/to/your/repository &gt; ./repository.dump</code></p>
<p>And how to restore it:</p>
<p><code>mkdir /new/path/to/your/repository<br />
svnadmin create /new/path/to/your/repository<br />
svnadmin load /new/path/to/your/repository &lt; ./repository.dump</code></p>
<p>But don&#8217;t tell you what to do to solve the problem that will arise when you try to restore it:</p>
<p><code>svnadmin: Dump stream contains a malformed header (with no ':') at '* Dumped revision 0.'</code></p>
<p>The solution is too simple; just run:</p>
<p><code>grep --binary-files=text -v '^* Dumped revision' ./repository.dump > ./repository.clear-dump</code></p>
<p>Now you should be able to restore your subversion repository with no problems:</p>
<p><code>svnadmin load /new/path/to/your/repository &lt; ./repository.clear-dump</code></p>
<p>PS: I don&#8217;t use <em><a href="http://svnbook.red-bean.com/en/1.0/re33.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://svnbook.red-bean.com/en/1.0/re33.html', 'hotcopy');">hotcopy</a></em> because I prefer to have a single file for these backups.</p>
		
		
			</div>
</article><article id="post-41" class="clearfix post-41 post type-post status-publish format-standard hentry category-howtos tag-debian tag-internationalization tag-pootle">
	<header class="entry-header">
		<h1 class="entry-title">
						<a  href="/blog/posts/installing-pootle-on-debian-etch-the-easiest-way/" rel="bookmark">Installing Pootle on Debian Etch, The Easiest Way</a>
		</h1>
	</header>
	
	
	<footer class="entry-meta">
		<span class="post-category">
			posted in <a href="/blog/topics/howtos/" rel="category tag">HOWTOs</a>		</span>
		
		
		<span class="post-date">
			on <a href="/blog/posts/installing-pootle-on-debian-etch-the-easiest-way/" title="3:34 pm" rel="bookmark"><time class="entry-date" datetime="2012-11-09T23:15:57+00:00">May 21, 2008</time></a>
		</span>
		
		
		<span class="by-author"> by			<span class="author vcard">
				<a class="url fn n" href="/blog/posts/author/admin/" title="View all posts by Gustavo" rel="author">Gustavo</a>
			</span>
		</span>
		
		
							<span class="comments-link">
						<a href="/blog/posts/installing-pootle-on-debian-etch-the-easiest-way/#comments">5 Comments</a>					</span>
						
		
			</footer>
	
	
		
	
	<div class="entry-content clearfix">
		<p><a href="http://translate.sourceforge.net/wiki/pootle/index" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://translate.sourceforge.net/wiki/pootle/index', 'Pootle');" title="A user-friendly web portal that makes the translation process so much simpler">Pootle</a> is a user-friendly web application for online translation of contents. It&#8217;s used by organizations like <a href="http://translate.creativecommons.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://translate.creativecommons.org/', 'Creative Commons');">Creative Commons</a>, <a href="http://www.sunvirtuallab.com:32300/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.sunvirtuallab.com:32300/', 'OpenOffice.org');">OpenOffice.org</a> and <a href="http://translate.gnulinuxmatters.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://translate.gnulinuxmatters.org/', 'GNU/Linux Matters');" title="GNU/Linux Matters!">GNU/Linux Matters</a>.</p>
<p>I&#8217;m going to show you how to install it the easiest way, from my experience with the <a href="http://translate.gnulinuxmatters.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://translate.gnulinuxmatters.org/', 'GLM Translation Service');" title="GNU/Linux Matters!">GLM Translation Service</a> under Debian 4.0 (this guide might also work under Ubuntu, though). I&#8217;ll use the <a href="http://www.debianhelp.co.uk/sudo.htm" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.debianhelp.co.uk/sudo.htm', 'sudo');" title="Sudo Configuration in Debian">sudo</a> utility, so I assume that you&#8217;ve already installed and configured sudo accordingly for your user.</p>
<h2>Installing dependencies</h2>
<p>Some of the Pootle&#8217;s dependencies are available in Debian repositories, so we may install them by running:<br />
<code>sudo aptitude install python-dev python-pysqlite2 python-celementtree subversion bzip2 g++ curl</code></p>
<p>We&#8217;re now going to install the other software packages required by Pootle. First, select the directory where you want to download and compile your software, for example:<br />
<code>cd /usr/src</code></p>
<p>To get the source code of the packages and extract them, run the following commands:<br />
<code>curl http://www.kid-templating.org/dist/0.9.6/kid-0.9.6.tar.gz | tar xzv<br />
curl http://dfn.dl.sourceforge.net/sourceforge/translate/translate-toolkit-1.1.1.tar.bz2 | tar xjv<br />
curl http://garr.dl.sourceforge.net/sourceforge/translate/Pootle-1.1.0.tar.bz2 | tar xjv<br />
curl http://jtoolkit.sourceforge.net/snapshots/jToolkit-0.7.8/jToolkit-0.7.8.tar.gz | tar xzv<br />
</code></p>
<p>Installing the applications:<br />
<code>sudo python translate-toolkit-1.1.1/setup.py install<br />
sudo python kid-0.9.6/setup.py install<br />
sudo Pootle-1.1.0/pootlesetup.py install<br />
sudo jToolkit-0.7.8/jToolkitSetup.py install<br />
</code></p>
<h3>Do not install PyLucene</h3>
<p>Pootle is supposed to work better with PyLucene, but if you (like me) hate headaches, you won&#8217;t install PyLucene on Debian Etch. If you try to install it, you&#8217;d get this error:<br />
<code>install: cannot stat `/usr/lib/security/libgcj.security': No such file or directory<br />
make: *** [install] Error 1</code></p>
<p>There&#8217;s nothing you could install that would create that file; don&#8217;t you even try to create it as an empty file: You&#8217;d be able to install PyLucene, but Pootle won&#8217;t work and you&#8217;d get this error when you&#8217;ll try to run it:<br />
<code>GC Warning: Repeated allocation of very large block (appr. size 65536):<br />
May lead to memory leak and poor performance.</code></p>
<p>If it&#8217;s too late, and you&#8217;ve already installed PyLucene with <em>libgcj.security</em> as an empty file (as suggested in some mailing-lists), you may fix it by running the following commands:<br />
<code>sudo mv /usr/lib/python2.4/site-packages/_PyLucene.so /usr/lib/python2.4/site-packages/_PyLucene.so.old<br />
sudo mv /usr/lib/python2.4/site-packages/PyLucene.py /usr/lib/python2.4/site-packages/PyLucene.py.old<br />
sudo mv /usr/lib/python2.4/site-packages/PyLucene.pyc /usr/lib/python2.4/site-packages/PyLucene.pyc.old</code></p>
<h3>Don&#8217;t you have a mail server?</h3>
<p>If your mail server is not in the same host as Pootle, you&#8217;ll need to install one. Just run the command below to install <a href="http://en.wikipedia.org/wiki/Postfix_%28software%29" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Postfix_%28software%29', 'Postfix');">Postfix</a> and then select &#8220;Internet website&#8221; when asked about what you&#8217;ll use postfix for:<br />
<code>sudo apt-get install postfix</code></p>
<h2>Configuring Pootle</h2>
<p>To make it easy for you to configure and play with Pootle, I suggest you create softlinks to Pootle&#8217;s configuration files in a folder like <em>/etc/pootle</em>:<br />
<code>sudo mkdir /etc/pootle<br />
sudo ln /usr/lib/python2.4/site-packages/Pootle/pootle.prefs -s /etc/pootle/pootle.conf<br />
sudo ln /usr/lib/python2.4/site-packages/Pootle/users.prefs -s /etc/pootle/users.conf<br />
sudo ln /usr/lib/python2.4/site-packages/Pootle/html -s /etc/pootle/html<br />
sudo ln /usr/lib/python2.4/site-packages/Pootle/templates -s /etc/pootle/templates</code></p>
<p>This way, any file you might ever need to edit will be in /etc/pootle.</p>
<p>Now let&#8217;s edit the main configuration file in Pootle: <code>sudo nano /etc/pootle/pootle.conf</code></p>
<p>It&#8217;s well-documented, so I won&#8217;t talk a lot about it. I just suggest you only set the following parameters accordingly:</p>
<ul>
<li><em>description</em>: Describe your website powered by Pootle, with a text aimed at (potential) translators.</li>
<li><em>fromaddress</em>.</li>
<li><em>supportaddress</em>: The email address for translators to make questions. This might be a mailing list.</li>
<li><em>defaultrights</em>: I suggest you set it to <code>defaultrights = "view, suggest, archive, pocompile, translate, commit"</code></li>
<li><em>podirectory</em>: It&#8217;s the path to your translation files. For this HOWTO I&#8217;ll use <em>/var/translations</em>.</li>
</ul>
<h2>Your <em>pootle</em> user</h2>
<p>I suggest you create a user for running <em>pootle</em>:<br />
<code>sudo adduser --disabled-password --disabled-login pootle</code></p>
<h2>Setting up service scripts for Pootle</h2>
<p>Create the file <em>/etc/init.d/pootle</em> as root with the following contents:<br />
<code>#!/bin/bash<br />
# /etc/init.d/pootle: start and stop the Pootle Server<br />
# Pootle runs as user -pootle- via sudo<br />
# This script is based on the one published here http://translate.sourceforge.net/wiki/pootle/service_scripts<br />
PREFIX=/usr/local/pootle<br />
test -x /usr/bin/PootleServer || exit 0<br />
. /lib/lsb/init-functions<br />
case "$1" in<br />
start)<br />
log_begin_msg "Starting Pootle Server..."<br />
/usr/bin/sudo -u pootle $PREFIX/start_pootle &amp;<br />
log_end_msg 0<br />
;;<br />
stop)<br />
log_begin_msg "Stopping Pootle Server..."<br />
$PREFIX/stop_pootle &gt;/dev/null 2&gt;&amp;1<br />
log_end_msg 0<br />
;;<br />
restart)<br />
log_begin_msg "Stopping Pootle Server..."<br />
$PREFIX/stop_pootle &gt;/dev/null 2&gt;&amp;1<br />
log_end_msg 0<br />
log_begin_msg "Starting Pootle Server..."<br />
sudo -u pootle $PREFIX/start_pootle &amp;<br />
log_end_msg 0<br />
;;<br />
status)<br />
$PREFIX/status_pootle<br />
;;<br />
*)<br />
log_success_msg "Usage: /etc/init.d/pootle {start|stop|restart|status}"<br />
exit 1<br />
esac<br />
exit 0</code></p>
<p>Now let&#8217;s create, as root, the auxiliary scripts required by the script above:</p>
<h3>/usr/local/pootle/start_pootle</h3>
<p><code>#!/bin/bash<br />
# $PREFIX/start_pootle<br />
# Start script in port 8080, separates errors from normal logs<br />
# based on a script published here: http://translate.sourceforge.net/wiki/pootle/service_scripts<br />
export HOME="/home/pootle"<br />
/usr/bin/PootleServer -p 8080 $@ &gt;&gt; /var/log/pootle/`date "+%F"` 2&gt;&gt; /var/log/pootle/`date "+%F"`.err</code></p>
<h3>/usr/local/pootle/stop_pootle</h3>
<p><code><br />
#!/bin/bash<br />
# Stop script $PREFIX/stop_pootle<br />
# based on a script published here: http://translate.sourceforge.net/wiki/pootle/service_scripts<br />
echo "Killing Pootle"<br />
pidpootle=`ps -ef |grep PootleServer |grep python | awk '{print $2}'`<br />
pidpootle2=`ps -ef |grep start_pootle |grep bin | awk '{print $2}'`<br />
kill $pidpootle2 &gt;/dev/null 2&gt;&amp;1<br />
kill $pidpootle &gt;/dev/null 2&gt;&amp;1</code></p>
<h3>/usr/local/pootle/status_pootle</h3>
<p><code>#!/bin/bash<br />
# Pootle Status $PREFIX/status_pootle<br />
# based on a script published here: http://translate.sourceforge.net/wiki/pootle/service_scripts<br />
pidpootle=`ps -ef |grep PootleServer |grep python | awk '{print $2}'`<br />
if [ "$pidpootle" != "" ]<br />
then<br />
echo "Pootle Server running in pid ($pidpootle)"<br />
else<br />
echo "Pootle Server is not running"<br />
fi</code></p>
<h3>Make them work!</h3>
<p>Now we have to make these scripts <em>useful</em>:<br />
<code>sudo chmod +x /etc/init.d/pootle<br />
sudo chmod +x /usr/local/pootle/s*<br />
sudo update-rc.d pootle</code></p>
<h2>Configuring Pootle to use your repository</h2>
<p>Pootle supports several <a href="http://en.wikipedia.org/wiki/Revision_control" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Revision_control', 'VCSs');">VCSs</a>, but I&#8217;ll only teach you how to setup a Subversion working copy that Pootle may update and commit. If you don&#8217;t use a version control system, I recommend you do so. If you&#8217;re sure you don&#8217;t need it, you may skip this section. If you&#8217;re using another VCS, you&#8217;ll need to go to the Pootle&#8217;s website to <a href="http://translate.sourceforge.net/wiki/pootle/version_control" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://translate.sourceforge.net/wiki/pootle/version_control', 'learn how to configure it with Pootle');" title="Version control in Pootle">learn how to configure it with Pootle</a>.</p>
<h3>Setup your working copy</h3>
<p>Let&#8217;s create the working copy at, say, <em>/var/translations</em>. To do that in GNU/Linux Matters, we would run:<br />
<code>sudo svn co https://svn.gnulinuxmatters.org:81/i18n /var/translations</code><br />
You should replace the URL by yours.<br />
And don&#8217;t forget to set the <em>pootle</em> user as the owner:<br />
<code>sudo chown pootle -R /var/translations</code></p>
<h3>Create basic cronjobs</h3>
<p>We should run from time to time two scripts:</p>
<ul>
<li>One to commit the changes made by translators; ideally, these changes would be committed by translators themselves, but from my experience you should not count on that (most of them forget about it or just don&#8217;t know they can do that).</li>
<li>Another to update your PO templates from the repository.</li>
</ul>
<p>So we&#8217;re going to ask our <em>pootle</em> user to do this by creating cronjobs. First, <em>become pootle</em>:<br />
<code>sudo su - pootle</code><br />
Then run <code>crontab -e</code> and add the following two lines:<br />
<code>*/15 * * * * /usr/bin/svn update /var/translations &gt;&gt; /dev/null 2&gt;&gt; /home/pootle/update.err<br />
0 0,8,16 * * * /usr/bin/svn commit -m "Uncommitted translations in the last 8 hours" /var/translations &gt;&gt; /dev/null 2&gt;&gt; /home/pootle/commit.err</code></p>
<h2>Pootle is running on port 8080</h2>
<p>For security reasons, if you followed this HOWTO you&#8217;ll be running as the <em>pootle</em> user, not as root. And due to a UNIX misfeature, only root may open ports below 1024. So, unless you love appending the port number to your URLs, and if port 80 is available on your system, you&#8217;d <a href="http://translate.sourceforge.net/wiki/pootle/apache" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://translate.sourceforge.net/wiki/pootle/apache', 'proxy Pootle through a webserver');" title="Proxying Pootle through Apache">proxy Pootle through a webserver</a>.</p>
<p>The proxy trick is recommended, but if you cannot do that or just don&#8217;t want, you can use iptables to redirect traffic from port 8080 to 80. My suggestion would be to use the next iptables ruleset:<br />
<code># Generated by iptables-save v1.3.6 on Thu Jan 24 16:40:59 2008<br />
*nat<br />
:PREROUTING ACCEPT [0:0]<br />
:POSTROUTING ACCEPT [0:0]<br />
:OUTPUT ACCEPT [0:0]<br />
-A PREROUTING -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 8080<br />
COMMIT<br />
# Completed on Thu Jan 24 16:40:59 2008<br />
# Generated by iptables-save v1.3.6 on Thu Jan 24 16:40:59 2008<br />
*filter<br />
:INPUT ACCEPT [0:0]<br />
:FORWARD ACCEPT [0:0]<br />
:OUTPUT ACCEPT [495:60715]<br />
-A INPUT -i lo -j ACCEPT<br />
-A INPUT -m state --state INVALID -j DROP<br />
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT<br />
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT<br />
-A INPUT -p tcp -m tcp --dport 8080 -j ACCEPT<br />
-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT<br />
-A INPUT -m limit --limit 5/min -j LOG --log-prefix "iptables denied: " --log-level 7<br />
-A INPUT -p tcp -j REJECT --reject-with tcp-reset<br />
-A INPUT -p udp -j REJECT --reject-with icmp-port-unreachable<br />
-A INPUT -j REJECT --reject-with icmp-proto-unreachable<br />
-A FORWARD -j REJECT --reject-with icmp-port-unreachable<br />
COMMIT<br />
# Completed on Thu Jan 24 16:40:59 2008</code></p>
<p>For more information about this basic iptables-based firewall, you may read my <a href="/blog/posts/setting-up-your-first-server/">Setting up your first server</a> HOWTO.</p>
<h2>Criticism? Suggestions? Complaints?</h2>
<p>Leave a comment!</p>
		
		
			</div>
</article><article id="post-48" class="clearfix post-48 post type-post status-publish format-standard hentry category-gnulinux-matters category-howtos tag-debian tag-glm tag-gutsy tag-hardy tag-istanbul tag-recordmydesktop tag-screencast tag-ubuntu tag-xvidcap">
	<header class="entry-header">
		<h1 class="entry-title">
						<a  href="/blog/posts/the-only-screencasting-software-that-doesnt-crash-in-ubuntu-hardy/" rel="bookmark">The only screencasting software that doesn&#8217;t crash in Ubuntu Hardy</a>
		</h1>
	</header>
	
	
	<footer class="entry-meta">
		<span class="post-category">
			posted in <a href="/blog/topics/gnulinux-matters/" rel="category tag">GNU/Linux Matters</a>, <a href="/blog/topics/howtos/" rel="category tag">HOWTOs</a>		</span>
		
		
		<span class="post-date">
			on <a href="/blog/posts/the-only-screencasting-software-that-doesnt-crash-in-ubuntu-hardy/" title="5:07 pm" rel="bookmark"><time class="entry-date" datetime="2012-11-09T23:15:57+00:00">May 19, 2008</time></a>
		</span>
		
		
		<span class="by-author"> by			<span class="author vcard">
				<a class="url fn n" href="/blog/posts/author/admin/" title="View all posts by Gustavo" rel="author">Gustavo</a>
			</span>
		</span>
		
		
				
		
			</footer>
	
	
		
	
	<div class="entry-content clearfix">
		<p>I&#8217;ve spent a lot of time trying to <a href="https://tracker.gnulinuxmatters.org/ticket/139" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://tracker.gnulinuxmatters.org/ticket/139', 'record some screencasts for GLM');">record some screencasts for GLM</a>, but every screencasting software I tried crashed under Ubuntu Hardy (and Gutsy too):</p>
<ul>
<li>XVidCap: The workaround is supposed to be disabling sound, but didn&#8217;t work.</li>
<li>RecordMyDesktop (plus its two front-ends): Crashes with no error message. From time to time I was able to record videos.</li>
<li>Istanbul: Crashes if you select a window to be recorded.</li>
</ul>
<p>So, the only solution is to install a newer version of Istanbul for Debian:<br />
<code>http://ftp.fr.debian.org/debian/pool/main/i/istanbul/istanbul_0.2.2-4_i386.deb</code><br />
or, if you have a 64-bit box, <code>http://ftp.fr.debian.org/debian/pool/main/i/istanbul/istanbul_0.2.2-4_amd64.deb</code></p>
<p>After making the appropriate bug reports, I can finally start recording the screencasts with Istanbul!</p>
<p>PS: Forget about the above. That Debian package doesn&#8217;t work either. I&#8217;m installing KDE4 to check whether I can record the screencast with it; I think I saw such an option when I tried it out.</p>
<p>PPS: The KDE4 built-in screencasting component uses a weird format (cps?) which cannot be opened with VLC, Mplayer nor Kaffeine (<a href="http://ubuntuforums.org/showpost.php?p=4717105&amp;postcount=2" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ubuntuforums.org/showpost.php?p=4717105&amp;postcount=2', 'but there&#8217;s a dirty workaround');">but there&#8217;s a dirty workaround</a>). Anyways, it records the whole screen and I just want to record a single window.</p>
<p>PPPS: <a href="http://ubuntuforums.org/showthread.php?p=5016504" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ubuntuforums.org/showthread.php?p=5016504', 'I&#8217;m not alone');">I&#8217;m not alone</a>.</p>
		
		
			</div>
</article><article id="post-42" class="clearfix post-42 post type-post status-publish format-standard hentry category-howtos tag-debian tag-firewall tag-gnulinux tag-iptables tag-ssh">
	<header class="entry-header">
		<h1 class="entry-title">
						<a  href="/blog/posts/setting-up-your-first-server/" rel="bookmark">Setting up your first server</a>
		</h1>
	</header>
	
	
	<footer class="entry-meta">
		<span class="post-category">
			posted in <a href="/blog/topics/howtos/" rel="category tag">HOWTOs</a>		</span>
		
		
		<span class="post-date">
			on <a href="/blog/posts/setting-up-your-first-server/" title="2:55 pm" rel="bookmark"><time class="entry-date" datetime="2012-11-09T23:15:57+00:00">April 7, 2008</time></a>
		</span>
		
		
		<span class="by-author"> by			<span class="author vcard">
				<a class="url fn n" href="/blog/posts/author/admin/" title="View all posts by Gustavo" rel="author">Gustavo</a>
			</span>
		</span>
		
		
							<span class="comments-link">
						<a href="/blog/posts/setting-up-your-first-server/#comments">4 Comments</a>					</span>
						
		
			</footer>
	
	
		
	
	<div class="entry-content clearfix">
		<p>If you&#8217;re new to server management and use the terminal on <a href="http://www.getgnulinux.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.getgnulinux.org/', 'GNU/Linux');">GNU/Linux</a> from time to time, this guide will hopefully come in handy for you to get started with your own server.</p>
<p>Unless you have good reasons to use another <a href="http://www.getgnulinux.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.getgnulinux.org/', 'GNU/Linux');">GNU/Linux</a> distribution, I recommend you to install <a href="http://www.debian.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.debian.org', 'Debian');">Debian</a>. It has a lot of ready-to-install applications, is very stable and it&#8217;s perhaps the distribution with more tutorials around.</p>
<p>Please notice that this is a <em>very basic</em> tutorial and has only been tested on Debian.</p>
<h2>Connect to your server</h2>
<p>First of all, log in as root:<br />
<code>ssh root@123.123.123.123 # where 123.123.123.123 is your server's IP address </code></p>
<p>Some hosting providers disable ssh root access, so you will need to replace <em>root</em> by your user name. If this is the case, after you log in you should become <em>root</em>:</p>
<p><code>su -</code></p>
<h2>Update your system</h2>
<p><code>aptitude update<br />
aptitude upgrade<br />
aptitude dist-upgrade</code></p>
<h2>Add your user</h2>
<p>If your hosting provider disables root access, then you should skip this step.</p>
<p><code>adduser emacs</code></p>
<p>Replace emacs by <a href="http://en.wikipedia.org/wiki/Vi" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Vi', 'VI');">VI</a> <a href="http://en.wikipedia.org/wiki/Vi" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Vi', 'VI');">VI</a> <a href="http://en.wikipedia.org/wiki/Vi" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Vi', 'VI');">VI</a> if you don&#8217;t believe in <a href="http://www.stallman.org/saint.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.stallman.org/saint.html', 'Saint IGNUcius');">Saint IGNUcius</a>.</p>
<h2>Sudo setup</h2>
<p><a href="http://en.wikipedia.org/wiki/Sudo" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://en.wikipedia.org/wiki/Sudo', 'sudo');">sudo</a> is a very useful utility, and I recommend you to use it.</p>
<p>First, let&#8217;s install it:</p>
<p><code>aptitude install sudo</code></p>
<p>Then, we add your user to the list of sudoers, by running <code>visudo</code> and then adding the following line at the end of the file <code>emacs ALL=(ALL) ALL</code>.</p>
<p>Now you become yourself:</p>
<p><code>su emacs -</code></p>
<h2>Shared key ssh authentication</h2>
<p>At this point you should use shared key ssh authentication, but for that there&#8217;s <a href="http://ammonlauritzen.com/blog/2006/04/16/shared_key_ssh_authentication/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://ammonlauritzen.com/blog/2006/04/16/shared_key_ssh_authentication/', 'a great tutorial at ammonlauritzen.com');">a great tutorial at ammonlauritzen.com</a>.</p>
<h2>Configuring the SSH daemon</h2>
<p>Open /etc/ssh/sshd_config with your favorite text editor, say:</p>
<p><code>sudo nano /etc/ssh/sshd_config</code></p>
<p>And make sure the following lines are set this way, if not, add or modify them accordingly:<br />
<code>PermitRootLogin no<br />
PasswordAuthentication no<br />
X11Forwarding no<br />
UsePAM no<br />
AllowUsers emacs                      # separate two or more usernames by spaces</code></p>
<p>Finally, apply your modifications:<br />
<code>sudo /etc/init.d/ssh reload</code></p>
<p>Don&#8217;t log out yet, we need to check that you will be able to access your server via ssh (this is, that you didn&#8217;t break anything on the /etc/ssh/sshd_config file). To check if everything is OK, try to log in:<br />
<code>ssh emacs@123.123.123.123</code></p>
<p>If you&#8217;re able to access, then it&#8217;s well configured and you may close the second session. If not, then you should check your modifications and try again.</p>
<h2>Setting up a basic firewall</h2>
<p>We are going to setup a very basic firewall with the powerful <a href="http://www.netfilter.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.netfilter.org/', 'netfilter/iptables');">netfilter/iptables</a>. For this step you need to be root:<br />
<code>sudo -s</code></p>
<p>First, store the current iptables rules, in case something goes wrong with ours:<br />
<code>iptables-save &gt; /etc/iptables.conf.old</code></p>
<p>Now, create the file <em>/etc/iptables.conf</em> and add the following contents:<br />
<code># boring stuff for someone new to server administration<br />
*filter<br />
:INPUT ACCEPT [0:0]<br />
:FORWARD ACCEPT [0:0]<br />
:OUTPUT ACCEPT [495:60715]<br />
-A INPUT -i lo -j ACCEPT<br />
-A INPUT -m state --state INVALID -j DROP<br />
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT<br />
# this is the port used by the SSH daemon<br />
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT<br />
-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT<br />
-A INPUT -m limit --limit 5/min -j LOG --log-prefix "iptables denied: " --log-level 7<br />
-A INPUT -p tcp -j REJECT --reject-with tcp-reset<br />
-A INPUT -p udp -j REJECT --reject-with icmp-port-unreachable<br />
-A INPUT -j REJECT --reject-with icmp-proto-unreachable<br />
-A FORWARD -j REJECT --reject-with icmp-port-unreachable<br />
COMMIT</code></p>
<p>Please pay attention to this line:<br />
<code>-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT</code></p>
<p>You should use a line similar for every open port that you want to be accessible from the Internet. This is, if you have a webserver, you should copy that line but replace &#8220;22&#8221; by &#8220;80&#8221; (or any other port):<br />
<code>-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT</code></p>
<p>This is how you &#8220;enable&#8221; ports.</p>
<p>Then we load the configuration (and <strong>don&#8217;t log out</strong> until we test it!):<br />
<code>iptables-restore &lt; /etc/iptables.conf</code></p>
<h3>Testing the rules</h3>
<p>To test the rules, open another terminal and try to access your server:</p>
<p><code>ssh emacs@123.123.123.123</code></p>
<p>If you could access, then the rules should be OK. If not, reload the original rules until you find help:<br />
<code>iptables-restore &lt; /etc/iptables.conf.old</code></p>
<h3>Loading the rules when the server stars</h3>
<p>If the rules we defined work, then our the firewall should be loaded when the server starts:</p>
<p>Create the file /etc/network/if-pre-up.d/iptables with the following contents:<br />
<code>#!/bin/bash<br />
/sbin/iptables-restore &lt; /etc/iptables.conf</code></p>
<p>Then make it executable:<br />
<code>chmod +x /etc/network/if-pre-up.d/iptables</code></p>
<p>We can now go back to our normal user:<br />
<code>exit</code></p>
<h2>Your server is ready!</h2>
<p>At this point, you are ready to start installing applications on your brand-new server!</p>
<h2>What&#8217;s next?</h2>
<ul>
<li>Make sure you already know <a href="http://labor-liber.org/en/gnu-linux/introduction/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://labor-liber.org/en/gnu-linux/introduction/', 'the basics of GNU/Linux');">the basics of GNU/Linux</a>.</li>
<li><a href="http://wiki.debian.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://wiki.debian.org/', 'Learn more about Debian');">Learn more about Debian</a>.</li>
<li><a href="http://www.debian-administration.org/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.debian-administration.org/', 'Find the HOWTO you were looking for');">Find the HOWTO you were looking for</a>.</li>
</ul>
		
		
			</div>
</article>		</div>
		<!-- end .blog-masonry -->
		
					<nav class="navigation" role="navigation">
				<div class="nav-previous">
									</div>
				
				<div class="nav-next">
									</div>
			</nav>
			</div>
	<!-- end #content -->
</div>
<!-- end #primary -->

			</div>
        </section>
		
		
        <footer class="site-footer wrapper" role="contentinfo">
			<div class="row">
				<div id="supplementary" class="row-fluid">
									</div>
				
				<div class="site-info">
					Copyright 2007-2017 by Gustavo Narea. You may copy, distribute and build upon this work, under some conditions. <a href="/about/legal/">Read Terms of Use</a>. 				</div>
			</div>
        </footer>
    </div>
	
	
	<script>
  var codeElements = document.querySelectorAll("code");
 
  for (var i = 0; i < codeElements.length; i++) {
    codeElements[i].classList.add("prettyprint");
  }
</script><script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/detectmobilebrowser.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/modernizr.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.imagesloaded.min.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.fitvids.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/google-code-prettify/prettify.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.uniform.min.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.flexslider-min.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.isotope.min.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.fancybox-1.3.4.pack.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.masonry.min.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.history.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/js-url.min.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquerypp.custom.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/gamma.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/main.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/jquery.validate.min.js'></script>
<script type='text/javascript' src='/wp-content/themes/read-v4-3-1/js/send-mail.js'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.4.16'></script>
</body>
</html>